/* --- Component: Terminal --- */

/* Añade un margen interno al área del terminal para que el texto no esté pegado a los bordes */
.xterm-viewport {
  padding: 2px !important;
  /* Asegura que el padding no afecte al cálculo de tamaño del addon 'fit' */
  box-sizing: border-box !important;
}

.xterm,
.xterm-viewport {
  height: 100% !important;
  width: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  box-sizing: border-box !important;
}

/* --- Split Terminal Styles --- */
.split-terminal-splitter {
  height: 100% !important;
}

.split-terminal-splitter .p-splitter-gutter {
  transition: background 0.2s;
  cursor: col-resize;
}

.split-terminal-splitter .p-splitter-gutter:hover {
  background: var(--ui-button-hover, #ddd) !important;
}

/* --- Terminal Splitter con PrimeReact (específico para terminales) --- */
.terminal-splitter {
  height: 100% !important;
  width: 100% !important;
  border: none !important;
}

.terminal-splitter .p-splitter-gutter {
  width: 6px !important;
  margin: 0 -3px !important;
  cursor: col-resize !important;
  transition: none !important;
  position: relative;
  background: transparent !important;
  border: none !important;
  z-index: 10;
}

.terminal-splitter .p-splitter-gutter:hover {
  background: rgba(255, 255, 255, 0.1) !important;
}

.terminal-splitter .p-splitter-gutter:focus,
.terminal-splitter .p-splitter-gutter:active {
  outline: none !important;
  box-shadow: none !important;
}

/* Área invisible adicional para mejor detección del gutter */
.terminal-splitter .p-splitter-gutter::before {
  content: '';
  position: absolute;
  top: 0;
  left: -4px;
  right: -4px;
  bottom: 0;
  cursor: col-resize;
  z-index: 1;
  background: transparent !important;
  border: none !important;
  outline: none !important;
}

.terminal-splitter .p-splitter-panel {
  overflow: hidden;
  min-width: 200px !important;
  max-width: none !important;
}

/* Optimizaciones durante resize */
.terminal-splitter.p-splitter-resizing .p-splitter-panel {
  will-change: width, min-width, max-width !important;
  transition: none !important;
}

/* Asegurar que los terminales se rendericen correctamente */
.terminal-splitter .p-splitter-panel .terminal-outer-padding {
  width: 100% !important;
  min-height: 0 !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* === ESTILOS DE SCROLL PARA TERMINALES === */

/* 1. Scroll Nativo (Webkit) - Para versiones anteriores o si xterm usa scroll nativo */
.xterm-viewport::-webkit-scrollbar,
.split-container .terminal-outer-padding .xterm-viewport::-webkit-scrollbar {
  width: 8px !important;
  height: 8px !important;
}

.xterm-viewport::-webkit-scrollbar-track,
.split-container .terminal-outer-padding .xterm-viewport::-webkit-scrollbar-track {
  background: transparent !important;
}

.xterm-viewport::-webkit-scrollbar-thumb,
.split-container .terminal-outer-padding .xterm-viewport::-webkit-scrollbar-thumb {
  background-color: var(--ui-sidebar-border, #3e3e42) !important;
  border-radius: 4px !important;
  border: 2px solid transparent !important;
  background-clip: content-box !important;
  /* Crea efecto de padding */
}

.xterm-viewport::-webkit-scrollbar-thumb:hover,
.split-container .terminal-outer-padding .xterm-viewport::-webkit-scrollbar-thumb:hover {
  background-color: var(--ui-sidebar-text, #cccccc) !important;
}

.xterm-viewport::-webkit-scrollbar-corner {
  background: transparent !important;
}

/* 2. Scroll Custom Xterm.js v6+ - Estilos para el nuevo scrollbar basado en DOM */
.xterm .xterm-scrollable-element>.scrollbar {
  width: 10px !important;
  /* Ancho del área interactiva */
  background: transparent !important;
}

.xterm .xterm-scrollable-element>.scrollbar>.slider {
  width: 6px !important;
  /* Ancho visual de la barra */
  background: var(--ui-sidebar-border, #3e3e42) !important;
  border-radius: 4px !important;
  left: 2px !important;
  /* Centrado dentro del área de 10px */
}

.xterm .xterm-scrollable-element>.scrollbar>.slider:hover {
  background: var(--ui-sidebar-text, #cccccc) !important;
  cursor: default !important;
}

.xterm .xterm-scrollable-element>.scrollbar>.slider:active {
  background: var(--ui-sidebar-text, #ffffff) !important;
}

/* Ocultar flechas y sombras del scrollbar custom de xterm v6 */
.xterm .xterm-scrollable-element>.scrollbar>.scra,
.xterm .xterm-scrollable-element>.shadow {
  display: none !important;
}

/* 3. Firefox support */
.xterm-viewport,
.split-container .terminal-outer-padding .xterm-viewport {
  scrollbar-width: thin !important;
  scrollbar-color: var(--ui-sidebar-border, #3e3e42) transparent !important;
}

/* --- Ocultar scrollbars en modo split vertical si es necesario (ajustar según preferencia) --- */
/* Por ahora mantenemos el estilo consistente, comentando la ocultación total */
/*
.split-container .terminal-outer-padding .xterm-viewport {
  scrollbar-width: thin !important;
}
*/

/* Padding restaurado y color de fondo manejado en JS */
.terminal-outer-padding .xterm-viewport,
.terminal-outer-padding .xterm {
  box-sizing: border-box !important;
}

.terminal-outer-padding {
  padding: 10px 10px 10px 10px !important;
  box-sizing: border-box !important;
}

/* Elimina el recuadro azul de foco en el terminal */
.xterm.focus,
.xterm:focus-within {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
  /* Asegura que no haya ninguna sombra de foco */
}

/* Elimina el borde de foco naranja en elementos de Guacamole RDP */
.guacamole-display,
.guacamole-display:focus,
.guacamole-display:focus-within,
.guacamole-display:focus-visible,
div[data-guacamole-display],
div[data-guacamole-display]:focus,
div[data-guacamole-display]:focus-within,
div[data-guacamole-display]:focus-visible {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* Estilos adicionales para elementos canvas de Guacamole */
canvas:focus,
canvas:focus-within,
canvas:focus-visible {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* === OCULTAR SCROLLBAR DE PESTAÑAS === */
/* Clase para ocultar completamente el scrollbar del contenedor de pestañas */
.hide-scrollbar {
  /* Firefox */
  scrollbar-width: none !important;
  /* IE/Edge */
  -ms-overflow-style: none !important;
  /* Para navegadores WebKit (Chrome, Safari, Edge) */
  overflow: -moz-scrollbars-none !important;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

.hide-scrollbar::-webkit-scrollbar-track {
  display: none !important;
  background: transparent !important;
}

.hide-scrollbar::-webkit-scrollbar-thumb {
  display: none !important;
  background: transparent !important;
}

.hide-scrollbar::-webkit-scrollbar-corner {
  display: none !important;
  background: transparent !important;
}

/* Estilos adicionales para asegurar que no aparezca el scrollbar */
.hide-scrollbar {
  overflow-x: auto !important;
  overflow-y: hidden !important;
}

.hide-scrollbar::-webkit-scrollbar {
  -webkit-appearance: none !important;
  appearance: none !important;
}

/* === SOLUCIÓN PARA CURSOR DOBLE EN macOS CON GUACAMOLE RDP === */

/* Ocultar cursor del sistema cuando hay una sesión RDP activa */
.rdp-session-active {
  cursor: none !important;
}

/* Aplicar a todos los elementos dentro de una sesión RDP activa */
.rdp-session-active * {
  cursor: none !important;
}

/* Estilos específicos para el display de Guacamole */
.guacamole-display.rdp-active,
div[data-guacamole-display].rdp-active {
  cursor: none !important;
}

/* Canvas de Guacamole en sesión RDP activa */
.rdp-session-active canvas {
  cursor: none !important;
}

/* Contenedor de pestaña RDP activa */
.tab-content.rdp-active {
  cursor: none !important;
}

/* Asegurar que el cursor se oculte en toda el área de la sesión RDP */
.rdp-session-active .guacamole-display,
.rdp-session-active div[data-guacamole-display],
.rdp-session-active .tab-content {
  cursor: none !important;
}

/* Restaurar cursor normal para elementos de UI que no sean la sesión RDP */
.rdp-session-active .sidebar,
.rdp-session-active .status-bar,
.rdp-session-active .tab-header,
.rdp-session-active .p-splitter-gutter {
  cursor: auto !important;
}

/* Cursor específico para gutter de splitter durante sesión RDP */
.rdp-session-active .p-splitter-gutter {
  cursor: col-resize !important;
}